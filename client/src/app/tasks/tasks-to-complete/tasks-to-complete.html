<div class="col-sm-4 col-md-4" class="parent">
<mat-form-field id="taskTypeFilter">
    <mat-select #select placeholder="Task Type" (selectionChange)="applyFilter($event.value)"id="taskTypeFilter" >
      <mat-option *ngFor="let taskType of taskTypes" [value]="taskType">
        {{taskType.title}}
      </mat-option>
    </mat-select>
  </mat-form-field>
</div>

<!-- Table -->
<section class="TasksToCompleteDataTable" >
  <mat-table #table [dataSource]="dataTable" matSort matSortActive="id" matSortDisableClear>

    <!--Image Preview -->
    <ng-container matColumnDef="imageSrc">
        <mat-header-cell *matHeaderCellDef disableClear disableClear>Preview</mat-header-cell>
        <mat-cell *matCellDef="let task"> <img [src]="task.thumbnail | safeImage" height="64px" /> </mat-cell>
    </ng-container>

    <!-- Image Id -->
    <ng-container matColumnDef="imageId">
        <mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Id</mat-header-cell>
        <mat-cell *matCellDef="let task"> {{task.imageId}} </mat-cell>
    </ng-container>

    <!-- Project Title-->
    <ng-container matColumnDef="project">
      <mat-header-cell *matHeaderCellDef disableClear>Project</mat-header-cell>
      <mat-cell *matCellDef="let task"> {{task.projectTitle}} </mat-cell>
    </ng-container>

    <!-- Creator Name -->
    <ng-container matColumnDef="creatorName">
        <mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Task Submiter</mat-header-cell>
        <mat-cell *matCellDef="let task">
          <ng-container *ngFor="let user of users">
            <p *ngIf="user.id === task.creatorId">{{user.firstName | uppercase | slice:0:1}}. {{user.lastName | titlecase }} </p>
          </ng-container>
        </mat-cell>
    </ng-container>

    <!-- Cumulated Time -->
    <!-- TODO: Get cumulated in Editor when it'll be operationnal -->
    <ng-container matColumnDef="time">
      <mat-header-cell *matHeaderCellDef disableClear>Cumulated Time</mat-header-cell>
      <mat-cell *matCellDef="let task"> N/A </mat-cell>
    </ng-container>

    <!-- TaskType Selected Header -->
    <ng-container [(ngModel)]="selectedTaskType" ngDefaultControl matColumnDef="selectedTaskType">
      <mat-header-cell *matHeaderCellDef> 
        {{selectedTaskType}}
      </mat-header-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="['selectedTaskType']"></mat-header-row>
    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"(mouseup)="loadImage(row.imageId.toString())"></mat-row>
  </mat-table>

      <p *ngIf="!showCompleted && noData" id="tasksFinishedText"> You've completed all your assigned tasks. <br />Thanks for your work! </p>
  <mat-paginator [length]="length" [pageSize]="pageSize"></mat-paginator>
</section>
