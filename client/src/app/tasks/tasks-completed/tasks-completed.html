<!-- Hide Task Button -->
<div id="hideTasksButtons">
        <button mat-raised-button (click)="removeSelectedRows()">
            <span>Hide Tasks</span>
        </button>
    </div>

<!-- Table -->
<section class="completedTasksDataTable" >
  <mat-table #table [dataSource]="dataTable" matSort matSortActive="lastModifiedTime" matSortDirection="desc" matSortDisableClear>

    <!-- Hide Tasks Checkbox Column -->
    <ng-container matColumnDef="selectTasks">
      <mat-header-cell *matHeaderCellDef>
        <mat-checkbox (change)="$event ? masterToggle() : null"
                      [checked]="selection.hasValue() && isAllSelected()"
                      [indeterminate]="selection.hasValue() && !isAllSelected()">
        </mat-checkbox>
      </mat-header-cell>
      <mat-cell *matCellDef="let task">
        <mat-checkbox (click)="$event.stopPropagation()"
                      (change)="$event ? selection.toggle(task) : null"
                      [checked]="selection.isSelected(task)">
        </mat-checkbox>
      </mat-cell>
    </ng-container>

    <!--Image Preview -->
    <ng-container matColumnDef="imageSrc"  >
        <mat-header-cell *matHeaderCellDef disableClear disableClear>Preview</mat-header-cell>
        <mat-cell *matCellDef="let task" > <img [src]="task.thumbnail | safeImage" height="64px" /> </mat-cell>
    </ng-container>

    <!-- Image Id -->
    <ng-container matColumnDef="imageId">
        <mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Id</mat-header-cell>
        <mat-cell *matCellDef="let task"> {{task.imageId}} </mat-cell>
    </ng-container>

    <!-- Task Type Title-->
    <ng-container matColumnDef="taskTypeTitle" >
        <mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Task Type</mat-header-cell>
        <mat-cell *matCellDef="let task">
          <ng-container *ngFor="let taskType of taskTypes">
            <p *ngIf="taskType.id === task.taskTypeId">{{taskType.title}} </p>
          </ng-container>
         </mat-cell>
    </ng-container>

    <!-- Project Title-->
    <ng-container matColumnDef="projectTitle">
      <mat-header-cell *matHeaderCellDef  mat-sort-header disableClear>Project</mat-header-cell>
      <mat-cell *matCellDef="let task"> {{task.projectTitle}} </mat-cell>
    </ng-container>

    <!-- Cumulated Time -->
    <!-- TODO: Get cumulated in Editor when it'll be operationnal -->
    <ng-container matColumnDef="time">
      <mat-header-cell *matHeaderCellDef>Cumulated Time</mat-header-cell>
      <mat-cell *matCellDef="let task"> N/A </mat-cell>
    </ng-container>

    <!-- Last Modified Time -->
    <!-- TODO: Update the time at each modification -->
    <ng-container matColumnDef="lastModifiedTime">
      <mat-header-cell *matHeaderCellDef  mat-sort-header disableClear>Last Modified</mat-header-cell>
      <mat-cell *matCellDef="let task"> {{task.lastModifiedTime | date:'medium'}} </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"(mouseup)="loadImage(row.imageId.toString())" (click)="selection.toggle(row)"></mat-row>
  </mat-table>

      <p *ngIf="!showCompleted && noData" id="tasksFinishedText"> You've completed all your assigned tasks. <br />Thanks for your work! </p>
<mat-paginator [length]="length" [pageSize]="pageSize"></mat-paginator>
</section>
